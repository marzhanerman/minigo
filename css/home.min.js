function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function initUserLooksCarousel(t,e){var n;n={btnNext:$(".fashion-list").find(".user-looks-j-next-arrow"),btnPrev:$(".fashion-list").find(".user-looks-j-prev-arrow"),visible:t.data("visible"),timeout:t.data("timeout"),speed:t.data("speed"),beforeStart:e},wb.initCarousel(t,n)}function loadActiveImgs(t){t.find("img").filter("[data-wb-original]").each(function(t,e){var n=$(e);n.attr("src",n.data("wb-original")).removeAttr("data-wb-original")})}function loadRecentGoods(){$.post("/recentgoods").done(function(t){var e=$("#recentGoodsContainer"),n={$:e,handler:function(t){wb.newReceipts(t)},repeatable:!1,demandVisibleRatio:0};e.html(t),wb.scrollListener.addElements(e,function(t){wb.newReceipts(t)}),wb.scrollListener.doScrollHandler(n)})}function drawBrandScrollBar(){var t,e,n,i=$("#brandPane");0!==i.length&&(t=i.find(".viewport"),e=i.find(".overview"),n=i.find(".scrollbar"),e.width()<=t.width()&&n.hide(),i.tinyscrollbar({axis:"x",sizethumb:180,scroll:!1}),$(window).resize(function(){e.width()<=t.width()?n.hide():n.show(),i.tinyscrollbar_update()}))}function adjustAuctionArea(c){function l(t,e){t.css("marginBottom",e)}function t(t,e){var n=35/49,i=2.45,o=c.outerHeight(!1)-function(t){var e=0;return t.each(function(){e+=$(this).outerHeight(!1)}),e}(t),s=o*n*i/16.35,a=o/(4*n+3+2/i),r=o/16.35;if(!(u&&Math.abs(o-u)<4)){u=o;var d=$(window).width()<=1080;d?e.show():e.hide(),t.each(function(){var t=$(this),e=t.data("structural-item");if(d)l(t,"");else switch(e){case"carousel":l(t,s);break;case"banners-bottom":l(t,a);break;case"banners":l(t,r);break;case"last":l(t,0)}})}}var u,e=$("[data-structural-item]"),n=$(".j-toggle-carousel");setInterval(function(){t(e,n)},300)}function loadLazyImgs(t){t.find(".j-lazy-img").lazyload({effect:"fadeIn",threshold:700,failurelimit:4,event:"scroll"})}wb.namespace("home",function(t){wb.settings.redesignMainPage?(function(){loadLazyImgs($(".main-page")),wb.scrollListener.addElements($(".j-brands-slider-wrapper"),function(t){if($(".j-brands-slider-wrapper")){var e={container:$(".j-brands-slider-wrapper"),slider:{autoWidth:!0,slideMargin:26}};wb.carousel.initSlider(e)}});function t(t){function o(t,e){return"visited"===u.name?u.url:String.format("{0}?name={1}&nms={2}&size={3}&key={4}&startNm={5}&user={6}",u.url,u.name,JSON.stringify(t),e,function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()}(),c,n)}function a(t,e){var n=$.Deferred(),i=o(t,e);return("visited"===u.name?$.post(i):$.get(i)).done(function(t){n.resolve(t)}).fail(function(){n.resolve()}),n.promise()}function r(t){return!!(t&&t.value&&t.value.goods&&t.value.goods.length)}function d(t,e,n,i,o){var s=$(n.find(".j-products-container-block")),a=t&&0<t.length;if($.templates({goodsTmpl:"#newRecommendedGoodsTmpl"}),a){var r={goods:t,targetUrl:e,imgType:"small",sameWindow:!0,fastView:!0,lazy:{enable:i}};s.append($.render.goodsTmpl(r)),i&&loadLazyImgs(n),wb.settings.showPriceInCardsOnMainPage&&p(n,o)}}function e(){a(f,u.sizeForStaticGoods+80).done(function(t){if((M||t&&t.value&&t.value.nextNm)&&(M=!0,"visited"==u.name))return $(u.selector).hide(),void v();if(!(r(t)||M||t&&t.value&&t.value.nmsArr&&t.value.nmsArr.length))return $.each($(u.selector),function(t,e){$(e).hide()}),void v();var s=t.value;h=s.useAlternativeTitle,"visited"==u.name?(f=$.map(s.goods,function(t,e){return t.cod1S}),l=s.goods):f=s.nmsArr,M?0==(c=s.nextNm)&&m.disableBtn():s.goods.length>u.sizeForStaticGoods?c=s.goods[u.sizeForStaticGoods].cod1S:v(),$.each($(u.selector),function(t,e){$container=$(e);var n=$container.data("start"),i=$container.data("count");0==t&&function(t){var e=h&&u.alternativeTitle?$.localize(u.alternativeTitle):$.localize(u.title);t.find(".j-recommended-goods-title").html(e)}($container);var o=s.goods.slice(n,n+i);d(o,u.targetUrl,$container,!0,!1)})})}var n,c,l,i,u={},f=[],s=0,h=!1,p=function(t,e){var n=t.find(".j-product-item");n&&e&&(n=n.slice(s),s+=n.length);var i=[];$.templates({priceTmpl:"#newNestPriceTmpl"}),$.each(n,function(){var t=$(this).data("nmId");i.push({cod1S:t})}),wb.xnm.fillPrice(i,function(){$.each(n,function(){var e=$(this),t=$.grep(i,function(t){return e.data("nmId")==t.cod1S});t&&0<t.length&&e.find(".j-price-block").html($.render.priceTmpl(t[0]))})})},m=function(){var t=u.selector+" .j-show-more-goods",e=$(t).parent(u.selector);$(".main-page").on("click",t,function(){$(t).addClass("progress"),function(n){if(M)a().done(function(t){if(t&&t.value&&t.value.goods){var e=t.value;c=e.nextNm,d(e.goods,"MI",n,!1,!0),0==c&&m.disableBtn()}});else if("visited"==u.name){var t=(o=f.indexOf(c))+u.sizeForDynamicGoods;-1!==l.indexOf(l[t+1])?c=l[t].cod1S:v();var e=l.slice(o,t);d(e,u.targetUrl,n,!1,!0)}else{var i=u.sizeForDynamicGoods+80,o=f.indexOf(c),s=f.slice(o,o+i);a(s,i).done(function(t){if(r(t)){var e=t.value;e.goods.length>u.sizeForDynamicGoods?c=e.goods[u.sizeForDynamicGoods].cod1S:v(),d(e.goods.slice(0,u.sizeForDynamicGoods),u.targetUrl,n,!1,!0)}else v()})}}(e),$(t).removeClass("progress")})},v=function(){var t=u.selector+" .j-show-more-goods";$(".main-page").off("click",t),$(t).addClass("disabled")};i=t,wb.basket.getUser.done(function(t){n=t.uid}),$.extend(u,i),e(),m()}var e,n,i,o,s,a,u,f,r,h,d,c,l,p,m,v,g,w,b,S,y,T,k,C,j,I,P,A,R,E,x,B,O,z,N,L,D,G,M=!1;function F(t,i){var e=t.find("img").filter("["+v+"]");if(e.length){$.each(e,function(t,e){var n=$(e);!function(t){t.attr("src",t.attr(v)),t.removeAttr(v)}(i.find("img").filter("["+v+"='"+n.attr(v)+"']"))})}}function _(t){var e=function(t,e,n){var i,o,s=u.find(".j-slider-gallery").outerWidth(),a=Math.ceil(s/h),r=Math.floor(a/2),d=f.length-1,c=n-r;c<0&&(c=0);var l=n+r;return d<l&&(l=d),0<=n-e?(o=n,(i=e)<c&&(c=i)):(i=n,l<(o=e)&&(l=o)),t.slice(c,l+1)}(f,l=l||t,t);F(e,f),l=t}function H(t){return t.css("max-width").replace("px","")/t.css("max-height").replace("px","")}function U(){w=f.filter(".choosen"),b=f.filter(":not(.choosen)")}function V(t,e){var n=t[0].getBoundingClientRect().height*e,i=parseInt(t.css("min-width"));return i&&n<i&&(n=i),n}function q(t,e,n){var i=[],o=t.data("story-id");if(i.push(wb.stat.wrapParam("FeedID","main")),i.push(wb.stat.wrapParam("StoryID",o)),e)i.push(wb.stat.wrapParam("Preview",n?1:0)),i.push(wb.stat.wrapParam("ImageNumber",1));else{var s=t.data("author");i.push(wb.stat.wrapParam("Author",s))}return i}function W(){var t=localStorage&&localStorage.getItem(N);if(t)return JSON.parse(t)}function J(t){var n=W();!n||n.length<=0||t.each(function(){var t=$(this),e=t.data("story-id");0<=n.indexOf(e)&&t.addClass("visited")})}t({name:"hits",selector:".j-goods-wrapper-hits",url:"/homeRecommendedGoods",targetUrl:"MI",sizeForStaticGoods:70,sizeForDynamicGoods:49,title:"Хиты продаж",alternativeTitle:"Возможно, Вам понравится"}),t({name:"visited",selector:".j-goods-wrapper-visited",url:"/goods/visited",targetUrl:"RG",sizeForStaticGoods:14,sizeForDynamicGoods:49,title:"Вы смотрели"}),(R=$(".j-wb-stories-wrapper"),E=function(){$.post("/wbstories").done(function(t){t?(R.html(t),x.init()):R.hide()})},x={init:function(){e=$(".j-stories-slider-wrapper"),n=e.find(".j-stories-item"),function(){var t={container:e,visibleCount:7,slider:{autoWidth:!0,slideMargin:30,onAfterSlide:function(){z.sendShownStatisticPreview(n)}},lazy:{enable:!0}};wb.carousel.initSlider(t)}(),G.addStoriesPool(n),G.start(),wb.scrollListener.addElements(n,function(t){z.sendShownStatisticPreview(t)}),$(window).resize(function(){z.sendShownStatisticPreview(n)}),B.init(),e.on("mousedown",".j-stories-item",function(t){if(3!==t.which){var e=$(this);e.data("moving",!1),setTimeout(function(){e.on("mousemove",function(){e.data("moving",!0),e.off("mousemove")})},200),e.on("mouseup",function(){if(!e.data("moving")){var t=e.data("story-id");G.addStoryToVisited(t),B.show(t)}e.off("mouseup")})}})}},v="data-jc-original",g={loadSlides:_,resize:function(){l&&_(l)}},S=function(){h=V(b,p),d=V(w,m);var t=(h+30+(c=d-h))*f.length;b.width(h),w.width(d),r.width(t),r.css("margin-left",-(h+c)/2)},y=function(t){var e=h+30;r.css({transform:"translate3d("+-e*t+"px, 0px, 0px)","-webkit-transform":"translate3d("+-e*t+"px, 0px, 0px)"})},T={start:function(){U(),p=H(b),m=H(w),S()},move:function(t,e){f.width(h),t.width(d),y(e)},resize:function(){U(),S();var t=f.index(w);y(t)}},k={init:function(){f=(u=o).find(".j-stories-item"),r=u.find(".j-slider"),T.start(),f.each(function(){$(this).css("margin-right",30)}),$(window).on("resize.upperSlider",function(){var t;r.addClass("no-animate"),clearTimeout(t),t=setTimeout(function(){T.resize(),g.resize()},300)}),u.on("click",".j-story-link",function(t){if(3!==t.which){var e=$(this).parents(".j-stories-item");z.sendClickStatistic(e)}})},goToSlide:function(t,e){G.addStoryToVisited(t),e?r.addClass("no-animate"):r.hasClass("no-animate")&&r.removeClass("no-animate");var n=f.filter(function(){return $(this).data("story-id")==t}),i=f.index(n);g.loadSlides(i),T.move(n,i),z.sendShownStatistic(n)},destroy:function(){u.off("click",".j-story-link"),$(window).off("resize.upperSlider")}},I={init:function(){(j=(C=s).find(".j-stories-item")).each(function(){var t=$(this),e=t.data("story-bg");t.css("background-image",e)}),a=function(){var t={container:C,enableDrag:!1,visibleCount:9.6,slider:{autoWidth:!1,slideMargin:11},lazy:{enable:!0}};return wb.carousel.initSlider(t)}(),G.addStoriesPool(j),C.on("click",".j-stories-item",function(){var t=$(this).data("story-id");G.addStoryToVisited(t),P(t),k.goToSlide(t)})},goToSlide:function(t){if(a&&a.lightSliderInstance){var e=j.filter(function(){return $(this).data("story-id")==t}),n=j.index(e),i=j.length-9;i<n&&(n=i),a.lightSliderInstance.goToSlide(n)}},destroy:function(){C.off("click",".j-stories-item"),a&&a.lightSliderInstance&&a.lightSliderInstance.destroy()}},P=function(t){var e=$.merge(o.find(".j-stories-item"),s.find(".j-stories-item")),n=e.filter(function(){return $(this).data("story-id")==t});e.removeClass("choosen"),n.addClass("choosen")},A=function(){i.hide(),$("body").css("overflow","visible"),I.destroy(),k.destroy()},B={init:function(){i=$(".j-popup-gallery-thumbs"),o=$(".j-popup-stories-upper"),s=$(".j-popup-stories-bottom"),i.find(".close").click(function(){A()})},show:function(t){i.show(),$("body").css("overflow","hidden"),P(t),k.init(30),I.init(),G.start(),I.goToSlide(t),k.goToSlide(t,!0)}},z={sendShownStatisticPreview:function(t){t.filter(function(){return wb.utils.isElementInViewport($(this))}).each(function(){var t=$(this);O(t,!0)})},sendShownStatistic:O=function(t,e){var n;t.data("shown-stat-sent")||(n=q(t,!0,e))&&(wb.stat.sendEvent("STV",n,!1),t.attr("data-shown-stat-sent",!0))},sendClickStatistic:function(t){var e;t.data("click-stat-sent")||(e=q(t))&&(wb.stat.sendEvent("STC",e,!0),t.attr("data-click-stat-sent",!0))}},N="visitedStoies",L=[],D=function(t){for(var e=0;e<L.length;e++){var n=L[e].filter(function(){return $(this).data("story-id")==t});n&&n.addClass("visited")}},G={addStoriesPool:function(t){L.indexOf(t)<0&&L.push(t)},start:function(){for(var t=0;t<L.length;t++)J(L[t])},addStoryToVisited:function(t){if(localStorage){var e=[];0<=(e=(e=W())||[]).indexOf(t)||(e.push(t),localStorage.trySetItem(N,JSON.stringify(e)),D(t))}}},{init:function(){wb.scrollListener.addElements(R,function(){E()})}}).init(),quickNav({bottomPx:window.innerHeight}),$.each($(".j-listenScroll-carousel-banners"),function(t,e){wb.initCarousel($(e)),wb.stat.banners.sendShownCarousel($(e))}),wb.stat.banners.sendStatisticNow(),wb.scrollListener.start()}(),wb.settings.homeConfetti&&wb.home.confetti()):wb.home.parts(t)}),wb.home.parts=function(t){var i=[];$.each(t.parts,function(t,e){var n=$.Deferred();$.get(e.url).done(function(t){$(e.el).html(t),n.resolve()}).fail(function(){n.resolve()}),i.push(n)}),$.when.apply($,i).done(function(){!function(){$("#main-page").on("hover",".j-banner-wrapper",function(){$(this).find("a").addClass("active")}).on("mouseleave",".j-banner-wrapper",function(){$(this).find("a").removeClass("active")});var t=$("#sideBar"),e=$(".wrapper-left").add(".wrapper-main").add(".banners");loadLazyImgs(t),loadLazyImgs(e),$.each($(".j-listenScroll-carousel-banners"),function(t,e){wb.initCarousel($(e)),wb.stat.banners.sendShownCarousel($(e))}),wb.scrollListener.addElements($("#user-looks"),function(t){var o=$(t);initUserLooksCarousel(o,function(t,e){var n=e?o.find("li.jc-active").next():o.find("li.jc-active").prevAll(":not(.jc-clone)").slice(0,1);if(!n.length){var i=o.find("li.jc-active").nextAll(":not(.jc-clone)");n=i.slice(i.length-1)}loadActiveImgs(n)}),loadActiveImgs(o.find("li.jc-active"))}),wb.scrollListener.addElements($(".j-scroll-listener"),function(t){wb.newReceipts(t)}),wb.stat.banners.sendStatisticNow(),wb.scrollListener.start(),wb.home.portal(),loadRecentGoods(),$.when(wb.utils.script.require(wb.settings.scripts.recommendations,!0)).then(function(){var t=$(".j-recommendation-options").data("recommendation-options");wb.recommendations.init(t)}),drawBrandScrollBar(),"pl"!=wb.settings.currentLocale&&adjustAuctionArea(t)}()}),wb.settings.homeConfetti&&wb.home.confetti()},wb.home.portal=function(){var t=$("#portal-video-popup"),e=null;t.jqm({closeSelector:".j-close",escClose:!1,onShow:function(){null==e&&(e=_V_("#portal-video")).volume(.5),e.play()}}),$(".j-portal-video-open").on("click",function(){wb.stat.sendEvent("PRL",[wb.stat.wrapParam("CLK","vid")]),t.jqmShow()}),$(".suppliers-block-right a").on("click",function(){wb.stat.sendEvent("PRL",[wb.stat.wrapParam("CLK","url")])})},wb.home.videoGid=function(){function t(t){t&&t.basketInfo&&wb.basket&&wb.basket.basketShortUpdate&&wb.basket.basketShortUpdate(t.basketInfo)}var n=new wb.home.videoGid.productPopup.Entity;n.onAfterAddToBasket=t,n.onAfterPostpone=t,$("#video-gid").on("click",".main-video-item .video-image",function(t){t.preventDefault();var e=$(this).closest(".j-gid-product").data("cod1s");n.load(e)})},wb.home.videoGid.productPopup=function(){var d="#video-gid-popup",c="#product",l="#gid-video",u=".j-body",f=".j-close",h={addToBasket:"#add-to-basket",goToBasket:"#go-to-basket",postpone:"#postpone"},p={addToBasket:"#add-to-basket-msg",postpone:"#postpone-msg"};return{Entity:function(t){var e,n,i=this,o={videoPlayer:null,product:null},s=function(){e.btn.addToBasket.onClick=function(){var t=e.product.getModel();n.basket.add(t)},e.btn.postpone.onClick=function(){var t=e.product.getModel();n.poned.add(t)},e.onLoad=function(){e.player.init(),e.elements.set(),e.data.set(),e.player.mute(),e.player.play(),e.events.on()},e.onHide=function(){e.events.off()},n.basket.onAfterAdd=function(t){$.processResponse(t,function(t){e.btn.addToBasket.$.hide(),e.btn.goToBasket.$.show(),e.msg.addToBasket.show(),i.onAfterAddToBasket(t)},function(t){$.renderModalError(t,"red")})},n.poned.onAfterPostpone=function(t){$.processResponse(t,function(t){e.btn.postpone.$.hide(),e.msg.postpone.$.show(),i.onAfterPostpone(t)},function(t){$.renderModalError(t)})}},a=function(){e.$.jqm({target:u,closeSelector:f,onLoad:e.onLoad,onHide:e.onHide})},r=function(){e.loadView=function(t){e.queryStr.set(t),e.$.jqmShow()},e.events={on:function(){e.body.$.on("click",h.addToBasket,e.btn.addToBasket.onClick),e.body.$.on("click",h.postpone,e.btn.postpone.onClick)},off:function(){e.body.$.off("click",h.addToBasket),e.body.$.off("click",h.postpone)}},e.elements={set:function(){e.product.$=e.body.$.find(c),e.player.$=e.body.$.find(l),e.btn.addToBasket.$=e.body.$.find(h.addToBasket),e.btn.goToBasket.$=e.body.$.find(h.goToBasket),e.btn.postpone.$=e.body.$.find(h.postpone),e.msg.postpone.$=e.body.$.find(p.postpone),e.msg.addToBasket.$=e.body.$.find(p.addToBasket)}},e.player={init:function(){o.videoPlayer&&(o.videoPlayer.destroy(),o.videoPlayer=null),o.videoPlayer=_V_(l)},play:function(){o.videoPlayer.play()},mute:function(){o.videoPlayer.muted(!0)},show:function(){e.player.$.show(1e3)}},e.queryStr={get:function(t){return"gidvideopopup?cod1S="+t},set:function(t){e.$.jqm({ajax:e.queryStr.get(t)})}},e.data={set:function(){e.product.set()}},e.product.getModel=function(){return{cod1S:o.product.cod1S,characteristicId:o.product.characteristicId,quantity:1,sizeName:o.product.sizeName,isCredit:!1,targetUrl:"VG"}},e.product.set=function(){o.product=e.product.$.data("product")},e.msg.addToBasket.show=function(){e.msg.addToBasket.$.css("visibility","visible")},n.basket.add=function(t){$.post("/product/addtobasket",t,n.basket.onAfterAdd)},n.poned.add=function(t){$.post("/product/postpone",t,n.poned.onAfterPostpone)}};(e={opts:$.extend({},t),$:$(d),product:{},btn:{addToBasket:{},goToBasket:{},postpone:{}},msg:{postpone:{},addToBasket:{}}}).body={$:e.$.find(u)},n={basket:{},poned:{}},i.load=function(t){e.loadView(t)},s(),r(),a()}}}(),wb.home.confetti=function(){var e=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.timestamp=null,this.duration=t.duration||e.CONST.DURATION,this.progress=0,this.delta=0,this.progress=0,this.isLoop=!!t.isLoop,this.reset()}return _createClass(e,[{key:"reset",value:function(){this.timestamp=null}},{key:"start",value:function(t){this.timestamp=t}},{key:"tick",value:function(t){return this.timestamp?(this.delta=t-this.timestamp,this.progress=Math.min(this.delta/this.duration,1),1<=this.progress&&this.isLoop&&this.start(t),this.progress):0}}],[{key:"CONST",get:function(){return{DURATION:1e3}}}]),e}(),t=function(){function i(t){_classCallCheck(this,i),this.parent=t.elm||document.body,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=t.width||this.parent.offsetWidth,this.height=t.height||this.parent.offsetHeight,this.length=t.length||i.CONST.PAPER_LENGTH,this.yRange=t.yRange||2*this.height,this.progress=new e({duration:t.duration,isLoop:!1}),this.rotationRange="number"==typeof t.rotationLength?t.rotationRange:10,this.speedRange="number"==typeof t.speedRange?t.speedRange:10,this.sprites=[],this.canvas.style.cssText=["display: block","position: absolute","top: 0","left: 0","pointer-events: none","z-index: 20"].join(";"),this.render=this.render.bind(this),this.build(),this.parent.appendChild(this.canvas),this.progress.start(performance.now()),requestAnimationFrame(this.render)}return _createClass(i,[{key:"build",value:function(){for(var t=0;t<this.length;++t){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=i.CONST.SPRITE_WIDTH,e.height=i.CONST.SPRITE_HEIGHT,e.position={initX:Math.random()*this.width,initY:-e.height-Math.random()*this.yRange},e.rotation=this.rotationRange/2-Math.random()*this.rotationRange,e.speed=this.speedRange/2+Math.random()*(this.speedRange/2),n.save(),n.fillStyle=i.CONST.COLORS[Math.random()*i.CONST.COLORS.length|0],n.fillRect(0,0,e.width,e.height),n.restore(),this.sprites.push(e)}}},{key:"render",value:function(t){var e=this.progress.tick(t);this.canvas.width=this.width,this.canvas.height=this.height;for(var n=0;n<this.length;++n)this.ctx.save(),this.ctx.translate(this.sprites[n].position.initX+this.sprites[n].rotation*i.CONST.ROTATION_RATE*e,this.sprites[n].position.initY+e*(this.height+this.yRange)),this.ctx.rotate(this.sprites[n].rotation),this.ctx.drawImage(this.sprites[n],-i.CONST.SPRITE_WIDTH*Math.abs(Math.sin(e*Math.PI*2*this.sprites[n].speed))/2,-i.CONST.SPRITE_HEIGHT/2,i.CONST.SPRITE_WIDTH*Math.abs(Math.sin(e*Math.PI*2*this.sprites[n].speed)),i.CONST.SPRITE_HEIGHT),this.ctx.restore();requestAnimationFrame(this.render)}}],[{key:"CONST",get:function(){return{SPRITE_WIDTH:9,SPRITE_HEIGHT:16,PAPER_LENGTH:100,DURATION:8e3,ROTATION_RATE:50,COLORS:["#EF5350","#EC407A","#AB47BC","#7E57C2","#5C6BC0","#42A5F5","#29B6F6","#26C6DA","#26A69A","#66BB6A","#9CCC65","#D4E157","#FFEE58","#FFCA28","#FFA726","#FF7043","#8D6E63","#BDBDBD","#78909C"]}}}]),i}(),n=1e3*(parseInt(wb.settings.globalVariables.CONFETTI_INTERVAL,10)||1800);window.localStorage.removeItem("confety");var i=localStorage.getObject("confetyInterval");if(!i||Date.now()-parseInt(i)>n){localStorage.putObject("confetyInterval",Date.now());new t({width:window.innerWidth-20,height:window.innerHeight,length:120,duration:8e3}),setTimeout(function(){new t({width:window.innerWidth-20,height:window.innerHeight,length:120,duration:8e3})},4e3)}};